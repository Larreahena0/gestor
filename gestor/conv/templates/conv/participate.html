{% extends 'core/base.html' %}
{% load auth_extras %}
{% block cuerpo %}

    <h1>Convocatorias</h1>
    {% if request.user.is_authenticated %}
        {% if request.user|is_admin %}
            <a class="config" title="Eliminar" alt="Eliminar" id="delete" href="#"><i class="fas fa-trash-alt"></i></a>
            <a class="config" title="Editar" alt="Editar" id="editar" href="#"><i class="fas fa-pencil-alt"></i></a>
            <a class="config" title="Agregar" alt="Agregar" id="add" href="#"><i class="fas fa-plus"></i></a>
            <a class="config" title="Ver" alt="Ver" id="see" href="#"><i class="fas fa-eye"></i></a>
        {% endif %}
    {% endif %}
    <input type="text" id="textSearch" name="search" value="" placeholder="Búsqueda...">
    <hr>
    <br>
    <div class="Mostrar">
        <table id="tableConv" style="overflow-x:auto;">
            <tr>
                <th>Número</th>
                <th>Título</th>
                <th>Descripción</th>
                <th>Fecha de apertura</th>
                <th>Fecha de cierre</th>
            </tr>
        {% for convocatoria in convocatorias %}
            <tr class="info">
                <td>{{convocatoria.id}}</td>
                <td><a href="{% url 'details' id_item=convocatoria.id %}">{{convocatoria.name}}</a></td>
                <td>{{convocatoria.description}}</td>
                <td>{{convocatoria.opened}}</td>
                <td>{{convocatoria.closed}}</td>
            </tr>
        {% endfor %}
        </table>
    </div>
    <form action="" method="POST" enctype="multipart/form-data">
  		{% csrf_token %}
        <input type="hidden" name="contador" id="contador" value="0">
        <input type="hidden" name="estado" id="estado" value="0">
        <div class="Crear" id="campos">
            <input type="text" name="name" id="name" placeholder="Nombre de la convocatoria" autocomplete="off" required>
            <textarea name="description" id="description" cols="30" rows="10" placeholder="Descripción" equired></textarea>
			<label for="closed">Fecha de apertura</label>
            <input type="date" min="{{today}}" name="opened" id="opened" required>
            <label for="closed">Fecha de cierre</label>
            <input type="date" min="{{today}}" name="closed" id="closed" required>
            <label for="add_doc">Añadir documentos</label>
            <div>
                <button type="button" name="add_doc" id="add_doc">Añadir documento</button>
            </div>
            <input type="submit" value="Enviar"/>
        </div>
        <div class="Editar">
            {% if convocatorias.count != 0 %}
                <select name="conv" id="conv">
                    {% for convocatoria in convocatorias %}
                    <option value="{{convocatoria.id}}">{{convocatoria.name}}</option>
                    {% endfor %}
                </select>
                <input type="submit" value="Editar"/>
            {% else %}
                <div class="message in-info">
                    <p>En este momento no hay convocatorias</p>
                </div>
            {% endif %}    
        </div>
        <div class="Eliminar">
            {% if convocatorias.count != 0 %}
                <select name="conv" id="conv">
                    {% for convocatoria in convocatorias %}
                    <option value="{{convocatoria.id}}">{{convocatoria.name}}</option>
                    {% endfor %}
                </select>
                <input id="enviar" type="submit" value="Eliminar"/>
            {% else %}
                <div class="message in-info">
                    <p>En este momento no hay convocatorias</p>
                </div>
            {% endif %}    
        </div>
    </form>
    {% load static %}
    <script type="text/javascript" src="{% static 'conv/js/script.js' %}"></script>
    <link rel="stylesheet" href="{% static 'conv/css/participate_styles.css' %}">

{% endblock %}
